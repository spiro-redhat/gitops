apiVersion: tekton.dev/v1alpha1
kind: Task
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: "-10"
  name: echo
spec:
  workspaces:
    - name: cache
  params:
    - name: GIT_REVISION
      type: string
    - name: GIT_COMMIT_MESSAGE 
      type: string
    - name: GIT_REPO_URL
      type: string
    - name: GIT_REPO_NAME
      type: string
    - name: CONTENT_TYPE
      type: string
    - name: PUSHED_BY
      type: string
    - name: TERM
      type: string
      description: The term to echo
  steps:
    - name: echo
      image: registry.access.redhat.com/ubi9/ubi
      command:
        - echo
      args:
        - $(inputs.params.TERM)
    - name: redirect
      image: registry.access.redhat.com/ubi9/ubi
      script: |
         echo $(params.TERM) > $(workspaces.cache.path)/README.md
         cat $(workspaces.cache.path)/README.md
      